define(["modules/jquery-mozu","hyprlive","modules/backbone-mozu","modules/models-faceting","modules/views-productlists","modules/views-paging"],function(e,t,a,n,o,d){var i=t.getThemeSetting("useAnimatedProductLists")&&!Modernizr.mq("(max-width: 480px)");e(document).ready(function(){var t=e("[data-mz-search]"),r=e("[data-mz-facets]"),s=t.data("mz-category"),c=t.data("mz-search"),m=require.mozuData("facetedproducts");if(m){var l=new n.FacetedProductCollection(m);c&&l.setQuery(c),s&&l.setHierarchy("categoryId",s);var u={pagingControls:new d.PagingControls({el:t.find("[data-mz-pagingcontrols]"),model:l}),pageNumbers:new d.PageNumbers({el:t.find("[data-mz-pagenumbers]"),model:l}),productList:i?new o.AnimatedList({el:t.find("[data-mz-productlist] .mz-productlist-list"),model:l}):new o.List({el:t.find("[data-mz-productlist]"),model:l})};r.length>0&&(u.facetPanel=new o.FacetingPanel({el:r,model:l})),a.history.start({pushState:!0,root:window.location.pathname});var g=new a.Router;l.on("facetchange",function(e){g.navigate(e,{replace:!0})}),l.on("change:pageSize",l.updateFacets,l)}_.invoke(u,"render"),window.facetingViews=u})});